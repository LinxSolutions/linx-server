<section class="hero is-fullheight">
  <div class="hero-body">
    <div class="container">
      <div class="columns">

        <div class="column"></div>

        <div class="column">

          <center>
            <figure class="image is-96x96">
              <img src="{{ url_for('static', filename='img/icon.png') }}">
            </figure>
          </center>

          <br>

          <article id="signup" class="message is-dark">
            <div class="message-header">
              <p>Sign Up</p>
            </div>
            <div class="message-body">

              <div id="status" class="has-text-centered"></div>

              <div class="field">
                <label class="label">First Name</label>
                <div class="control">
                  <input id="fname" class="input" type="text" placeholder="John" autocomplete="off">
                </div>
              </div>

              <div class="field">
                <label class="label">Last Name</label>
                <div class="control">
                  <input id="lname" class="input" type="text" placeholder="Doe" autocomplete="off">
                </div>
              </div>

              <div class="field">
                <label class="label">Email</label>
                <div class="control">
                  <input id="email" class="input" type="email" placeholder="john.doe12@example.com" autocomplete="off">
                </div>
              </div>
              
              <div class="field">
                <label class="label">Username</label>
                <div class="control">
                  <input id="username" class="input" type="text" placeholder="johnDoe12" autocomplete="off">
                </div>
              </div>


              <div class="field">
                <label class="label">Password</label>
                <div class="control">
                  <input id="password" class="input" type="password" placeholder="••••••••" autocomplete="off">
                </div>
              </div>


              <div class="field">
                <label class="label">Confirm Password</label>
                <div class="control">
                  <input id="confirm" class="input" type="password" placeholder="••••••••" autocomplete="off">
                </div>
              </div>

              <br>
              <a id="signupBtn" onclick="signup()" class="button is-dark is-fullwidth is-medium">Create Account</a>



            </div>
          </article>


          <div id="success" class="has-text-centered">
            <h3 class="title is-3">Account Created Successfully</h3>
            <br>
            <h5 class="subtitle is-5">A confirmation email has been sent to <strong id="successEmail">john.doe12@example.com</strong></h5>
          </div>



          <script type="text/javascript">
            
          function signup(){

            $('#signupBtn').addClass('is-loading');

            var fname = document.getElementById('fname').value;
            var lname = document.getElementById('lname').value;
            var email = document.getElementById('email').value;
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            var confirm = document.getElementById('confirm').value;


             $.ajax ({
                url: "{{ url_for('api.signup') }}",
                type: "POST",
                data: JSON.stringify({
                    fname: fname,
                    lname: lname,
                    email: email,
                    username: username,
                    password: password,
                    confirm: confirm
                }),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function(result){
                    console.log(result);
                    if(result.status == 'success'){
                        document.getElementById('signup').style.display = 'none';
                        document.getElementById('successEmail').innerHTML = email;
                        document.getElementById('success').style.display = 'block';
                    } else {
                        document.getElementById('status').innerHTML = result.message;
                    }
                    $('#signupBtn').removeClass('is-loading');
                }
            });


          }

          </script>


        </div>

        <div class="column"></div>

      </div>
    </div>
  </div>
</section>